<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®œè˜­é«˜éµç‰¹å®šå€åœ°åƒ¹æ¼²å¹…åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            padding: 40px;
        }
        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 900px;
            /* ğŸ”¥ é—œéµä¿®æ­£ï¼šçµ¦å®šæ˜ç¢ºé«˜åº¦ï¼Œé¿å…åœ–è¡¨è¢«å£“æ‰å°è‡´å­—ä¸è¦‹ */
            height: 550px; 
            display: flex;
            flex-direction: column;
        }
        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 5px;
        }
        p.subtitle {
            text-align: center;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        .legend-box {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        .dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 5px; }
        .dot-blue { background-color: rgba(54, 162, 235, 0.7); }
        .dot-red { background-color: rgba(255, 99, 132, 0.8); }
        
        /* ç•«å¸ƒå®¹å™¨ï¼Œç¢ºä¿ RWD */
        .canvas-wrapper {
            flex-grow: 1;
            position: relative;
            width: 100%;
        }
    </style>
</head>
<body>

<div class="chart-container">
    <h2>å¤±é€Ÿçš„è¾²åœ°ï¼šå®œè˜­é«˜éµå®šæ¡ˆå‰å¾Œåœ°åƒ¹å°æ¯”</h2>
    <p class="subtitle">è³‡æ–™ä¾†æºï¼šå…§æ”¿éƒ¨å¯¦åƒ¹ç™»éŒ„ (110H2 vs 111H1)</p>
    
    <div class="legend-box">
        <div><span class="dot dot-blue"></span>110å¹´ä¸‹åŠå¹´ (å®šæ¡ˆå‰)</div>
        <div><span class="dot dot-red"></span>111å¹´ä¸ŠåŠå¹´ (å®šæ¡ˆå¾Œ)</div>
    </div>

    <div class="canvas-wrapper">
        <canvas id="landPriceChart"></canvas>
    </div>
</div>

<script>
    // --- æ•¸æ“šæº–å‚™å€ ---
    // å°æ‡‰é—œä¿‚ï¼š0=å»ºè˜­æ–°æ®µ, 1=å‡±æ—‹äºŒæ®µ, 2=å‡±æ—‹ä¸€æ®µ, 3=æŒ¯èˆˆæ®µ
    
    // Jitter å‡½å¼ï¼šç”¢ç”Ÿ -0.15 åˆ° 0.15 ä¹‹é–“çš„éš¨æ©Ÿæ•¸ï¼Œè®“é»æ•£é–‹
    const jitter = () => (Math.random() - 0.5) * 0.3;

    // 1. å®šæ¡ˆå‰ (è—è‰²æ•¸æ“š - ä¾æ“š 110H2 åˆ†æ)
    const dataBefore = [
        // å»ºè˜­æ–°æ®µ (0) - åœ°æ¿åƒ¹
        { x: 0 + jitter(), y: 1.12, location: "å»ºè˜­æ–°æ®µ (110/08)" },
        { x: 0 + jitter(), y: 1.4, location: "å»ºè˜­æ–°æ®µ (110/10)" },
        { x: 0 + jitter(), y: 1.4, location: "å»ºè˜­æ–°æ®µ (110/10)" }, 
        
        // å‡±æ—‹äºŒæ®µ (1) - æ··äº‚æœŸ
        { x: 1 + jitter(), y: 3.1, location: "å‡±æ—‹äºŒæ®µ (110/12)" },
        { x: 1 + jitter(), y: 3.5, location: "å‡±æ—‹äºŒæ®µ (110/12)" },
        { x: 1 + jitter(), y: 3.2, location: "å‡±æ—‹äºŒæ®µ (110/11)" },
        { x: 1 + jitter(), y: 8.0, location: "å‡±æ—‹äºŒæ®µ (110/12, å·è·‘åƒ¹)" }, 

        // å‡±æ—‹ä¸€æ®µ (2) - èµ·æ¼²
        { x: 2 + jitter(), y: 2.8, location: "å‡±æ—‹ä¸€æ®µ (110/11)" },
        { x: 2 + jitter(), y: 1.1, location: "å‡±æ—‹ä¸€æ®µ (110/07)" },
        { x: 2 + jitter(), y: 4.3, location: "å‡±æ—‹ä¸€æ®µ (110/12)" },
        { x: 2 + jitter(), y: 4.8, location: "å‡±æ—‹ä¸€æ®µ (110/12)" },

        // æŒ¯èˆˆæ®µ (3) - è¦ªå‹äº‚è±¡
        { x: 3 + jitter(), y: 2.3, location: "æŒ¯èˆˆæ®µ (110/11, è¦ªå‹)" },
        { x: 3 + jitter(), y: 2.6, location: "æŒ¯èˆˆæ®µ (110/12)" },
        { x: 3 + jitter(), y: 5.3, location: "æŒ¯èˆˆæ®µ (110/09)" },
        { x: 3 + jitter(), y: 13.0, location: "æŒ¯èˆˆæ®µ (110/12, ç•°å¸¸é«˜)" } 
    ];

    // 2. å®šæ¡ˆå¾Œ (ç´…è‰²æ•¸æ“š - ä¾æ“š 111H1 åˆ†æ)
    const dataAfter = [
        // å»ºè˜­æ–°æ®µ (0) - è£œæ¼²
        { x: 0 + jitter(), y: 3.35, location: "å»ºè˜­æ–°æ®µ (111/01)" }, 
        { x: 0 + jitter(), y: 5.5, location: "å»ºè˜­æ–°æ®µ (111/04)" }, 
        { x: 0 + jitter(), y: 7.9, location: "å»ºè˜­æ–°æ®µ (111/03)" },

        // å‡±æ—‹äºŒæ®µ (1) - å…¨é¢å™´ç™¼
        { x: 1 + jitter(), y: 11.0, location: "å‡±æ—‹äºŒæ®µ (111/01)" },
        { x: 1 + jitter(), y: 11.0, location: "å‡±æ—‹äºŒæ®µ (111/02)" },
        { x: 1 + jitter(), y: 14.0, location: "å‡±æ—‹äºŒæ®µ (111/06, é«˜é»)" },
        { x: 1 + jitter(), y: 10.5, location: "å‡±æ—‹äºŒæ®µ (111/05)" },
        { x: 1 + jitter(), y: 9.8, location: "å‡±æ—‹äºŒæ®µ (111/04)" },

        // å‡±æ—‹ä¸€æ®µ (2) - ç«™ç©©é«˜æª”
        { x: 2 + jitter(), y: 12.1, location: "å‡±æ—‹ä¸€æ®µ (111/06)" },
        { x: 2 + jitter(), y: 10.7, location: "å‡±æ—‹ä¸€æ®µ (111/03)" },
        { x: 2 + jitter(), y: 9.2, location: "å‡±æ—‹ä¸€æ®µ (111/04)" },
        { x: 2 + jitter(), y: 11.0, location: "å‡±æ—‹ä¸€æ®µ (111/03)" },

        // æŒ¯èˆˆæ®µ (3) - åƒ¹æ ¼å®šå‹
        { x: 3 + jitter(), y: 9.1, location: "æŒ¯èˆˆæ®µ (111/03)" },
        { x: 3 + jitter(), y: 8.9, location: "æŒ¯èˆˆæ®µ (111/01)" },
        { x: 3 + jitter(), y: 8.8, location: "æŒ¯èˆˆæ®µ (111/02)" },
        { x: 3 + jitter(), y: 10.2, location: "æŒ¯èˆˆæ®µ (111/06)" }
    ];

    const ctx = document.getElementById('landPriceChart').getContext('2d');
    
    new Chart(ctx, {
        type: 'scatter',
        data: {
            datasets: [
                {
                    label: '110H2 (å®šæ¡ˆå‰)',
                    data: dataBefore,
                    backgroundColor: 'rgba(54, 162, 235, 0.6)', 
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1,
                    pointRadius: 8,
                    pointHoverRadius: 10
                },
                {
                    label: '111H1 (å®šæ¡ˆå¾Œ)',
                    data: dataAfter,
                    backgroundColor: 'rgba(255, 99, 132, 0.7)', 
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1,
                    pointRadius: 8,
                    pointHoverRadius: 10
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false, // è®“åœ–è¡¨é©æ‡‰ CSS è¨­å®šçš„é«˜åº¦
            scales: {
                x: {
                    type: 'linear',
                    position: 'bottom',
                    min: -0.5,
                    max: 3.5,
                    title: { display: true, text: 'åœ°æ®µå€åŸŸ', font: { size: 14, weight: 'bold' } },
                    ticks: {
                        stepSize: 1,        // å¼·åˆ¶åˆ»åº¦é–“è·
                        autoSkip: false,    // ğŸ”¥ ç¦æ­¢è‡ªå‹•éš±è—
                        maxRotation: 0,     // å¼·åˆ¶æ–‡å­—ä¸æ—‹è½‰
                        font: { size: 14, weight: 'bold' },
                        callback: function(value) {
                            // å®šç¾©å°æ‡‰åç¨±
                            const labels = ["å»ºè˜­æ–°æ®µ", "å‡±æ—‹äºŒæ®µ(æ ¸å¿ƒ)", "å‡±æ—‹ä¸€æ®µ", "æŒ¯èˆˆæ®µ"];
                            // åªåœ¨æ•´æ•¸ä½ç½®é¡¯ç¤ºæ¨™ç±¤
                            if (Number.isInteger(value) && value >= 0 && value < labels.length) {
                                return labels[value];
                            }
                        }
                    },
                    grid: {
                        display: false // éš±è—å‚ç›´æ ¼ç·šï¼Œç•«é¢è¼ƒä¹¾æ·¨
                    }
                },
                y: {
                    title: { display: true, text: 'å–®åƒ¹ (è¬ / åª)', font: { size: 14, weight: 'bold' } },
                    beginAtZero: true,
                    suggestedMax: 16,
                    ticks: {
                        font: { size: 12 }
                    }
                }
            },
            plugins: {
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    callbacks: {
                        title: function() { return ''; }, // ä¸é¡¯ç¤ºæ¨™é¡Œ
                        label: function(context) {
                            const point = context.raw;
                            return `${point.location}: ${point.y} è¬/åª`;
                        }
                    }
                },
                legend: {
                    display: false // éš±è—å…§å»ºåœ–ä¾‹ (å› ç‚ºæˆ‘å€‘æœ‰ç”¨ HTML è‡ªå·±åˆ»æ¯”è¼ƒæ¼‚äº®çš„)
                }
            }
        }
    });
</script>

</body>
</html>