<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®œè˜­é«˜éµåœ°åƒ¹ç‚’ä½œåœ°åœ–</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        body { margin: 0; padding: 0; font-family: "Microsoft JhengHei", sans-serif; }
        
        #map {
            width: 100%;
            height: 100vh;
            background: #f0f0f0;
        }

        /* å½ˆå‡ºè¦–çª—æ¨£å¼ */
        .custom-popup .leaflet-popup-content-wrapper {
            border-radius: 10px;
            padding: 0;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .custom-popup .leaflet-popup-content {
            margin: 0;
            width: 280px !important;
        }
        .custom-popup .leaflet-popup-tip {
            background: #2c3e50; /* è®“ç®­é ­è·Ÿå¡ç‰‡æ¨™é ­åŒè‰² */
        }
        
        /* å¡ç‰‡å…§å®¹è¨­è¨ˆ */
        .card-header {
            background: #2c3e50;
            color: white;
            padding: 15px;
            font-size: 1.2em;
            font-weight: bold;
            border-bottom: 3px solid #e74c3c;
        }
        .card-body {
            padding: 15px;
            background: white;
        }
        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            border-bottom: 1px dashed #eee;
            padding-bottom: 8px;
        }
        .price-label-text { color: #666; font-size: 0.9em; }
        .price-value { font-weight: bold; font-size: 1.1em; }
        .price-value.old { color: #2980b9; } /* è—è‰² */
        .price-value.new { color: #c0392b; font-size: 1.4em; } /* ç´…è‰² */
        
        .growth-tag {
            display: inline-block;
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 10px;
            width: 100%;
            text-align: center;
            box-sizing: border-box;
        }

        /* æµ®å‹•æ¨™é¡Œæ¡† */
        .map-title {
            position: absolute;
            top: 20px;
            left: 50px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            max-width: 320px;
            border-left: 5px solid #c0392b;
        }
        .map-title h1 { margin: 0 0 10px 0; font-size: 1.5em; color: #333; }
        .map-title p { margin: 0; color: #666; line-height: 1.5; font-size: 0.95em; }
        .legend-item { display: flex; align-items: center; margin-top: 10px; font-size: 0.9em; color: #555; }
        .legend-dot { width: 10px; height: 10px; border-radius: 50%; margin-right: 8px; display: inline-block; }

    </style>
</head>
<body>

    <div class="map-title">
        <h1>å®œè˜­é«˜éµç‚’æˆ¿åœ°åœ–</h1>
        <p>é»æ“Šåœ°åœ–ä¸Šçš„ç´…é»ï¼ŒæŸ¥çœ‹ <b>110å¹´(å®šæ¡ˆå‰)</b> èˆ‡ <b>111å¹´(å®šæ¡ˆå¾Œ)</b> çš„é©šäººæ¼²å¹…ã€‚</p>
        <div class="legend-item"><span class="legend-dot" style="background:#e74c3c;"></span>æ¼²å¹…ç†±å€</div>
        <div class="legend-item"><span class="legend-dot" style="background:#3498db;"></span>åƒè€ƒåœ°æ¨™</div>
    </div>

    <div id="map"></div>

    <script>
        // 1. åˆå§‹åŒ–åœ°åœ–
        // åŠ å…¥ scrollWheelZoom: falseï¼Œè®“ä½¿ç”¨è€…æ²å‹•é é¢æ™‚ä¸æœƒè¢«åœ°åœ–å¡ä½
        const map = L.map('map', {
            scrollWheelZoom: false, // ğŸ”¥ é—œéµä¿®æ­£
            dragging: !L.Browser.mobile, // (é¸ç”¨) æ‰‹æ©Ÿç‰ˆä¹Ÿå»ºè­°ç¦æ­¢æ‹–æ›³ï¼Œé¿å…æ‰‹æŒ‡æ»‘ä¸å‹•é é¢
            tap: !L.Browser.mobile
        }).setView([24.732, 121.766], 14);

        // 2. è¼‰å…¥åœ–è³‡ (ä½¿ç”¨ OpenStreetMapï¼Œå…è²»)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // 3. å®šç¾©æ•¸æ“š (å·²æ›´æ–°ç‚ºæ‚¨çš„ç²¾ç¢ºåº§æ¨™)
        const locations = [
            {
                name: "å‡±æ—‹äºŒæ®µ (æ ¸å¿ƒå€)",
                lat: 24.734927157889047, 
                lng: 121.76916810605083,
                priceOld: "3.1 ~ 8.0",
                priceNew: "11.0 ~ 14.0",
                growth: "æ¼²å¹…ç´„ 400%",
                desc: "é«˜éµé å®šç«™å€æ‰€åœ¨åœ°ï¼Œæ¼²å‹¢æœ€å…‡çŒ›ï¼Œåœ°æ¿åƒ¹ç›´æ¥æ¶ˆå¤±ã€‚"
            },
            {
                name: "å‡±æ—‹ä¸€æ®µ (å—å´)",
                lat: 24.72571270471212, 
                lng: 121.77218520036125,
                priceOld: "2.8",
                priceNew: "10.7 ~ 12.1",
                growth: "æ¼²å¹…ç´„ 430%",
                desc: "ç·Šé„°æ ¸å¿ƒå€å—å´ï¼Œå—æƒ æ–¼æ“´å¤§é–‹ç™¼é æœŸï¼Œè£œæ¼²å¼·å‹ã€‚"
            },
            {
                name: "æŒ¯èˆˆæ®µ (ç§‘å­¸åœ’å€æ—)",
                lat: 24.741908092594826, 
                lng: 121.76964420695157,
                priceOld: "2.6 (è¦ªå‹äº‚è±¡)",
                priceNew: "9.1 (ç«™ç©©)",
                growth: "æ¼²å¹…ç´„ 350%",
                desc: "110å¹´åº•å‡ºç¾å¤§é‡ç•°å¸¸è¦ªå‹äº¤æ˜“ï¼Œç›®å‰åƒ¹æ ¼å·²å®šéŒ¨åœ¨9è¬å·¦å³ã€‚"
            },
            {
                name: "å»ºè˜­æ–°æ®µ (å¤–åœ)",
                lat: 24.72677531983618, 
                lng: 121.75377741396957,
                priceOld: "1.4",
                priceNew: "3.35 ~ 7.9",
                growth: "æ¼²å¹…ç´„ 240%~460%",
                desc: "åŸæœ¬æ˜¯æ¯åª1è¬å¤šçš„ä½åƒ¹è¾²åœ°ï¼Œå› æ¯”åƒ¹æ•ˆæ‡‰è¢«å¸¶å‹•ç¿»å€ã€‚"
            },
            {
                name: "å®œè˜­ç¸£æ”¿åºœ", 
                lat: 24.731275623570053,
                lng: 121.76297189076136,
                type: "landmark"
            }
            ,
            {
                name: "å®œè˜­é«˜éµé å®šç«™å€",
                lat: 24.730317951493458,
                lng: 121.76597540333421,
                type: "landmark"
            }
        ];

        // 4. æŠŠæ•¸æ“šç•«åœ¨åœ°åœ–ä¸Š
        locations.forEach(point => {
            
            // å¦‚æœæ˜¯åœ°æ¨™ (ç¸£æ”¿åºœ)ï¼Œç”¨è—è‰²æ¨™è¨˜
            if(point.type === "landmark") {
                L.marker([point.lat, point.lng])
                 .addTo(map)
                 .bindPopup(`<b>${point.name}</b><br>ç¸£æ”¿ä¸­å¿ƒæ‰€åœ¨`);
                return;
            }

            // å¦‚æœæ˜¯æ•¸æ“šé»ï¼Œä½¿ç”¨ç´…è‰²åœ“åœˆæ¨™è¨˜
            const marker = L.circleMarker([point.lat, point.lng], {
                color: '#c0392b',      // é‚Šæ¡†ç´…
                fillColor: '#e74c3c',  // å¡«å……ç´…
                fillOpacity: 0.8,
                radius: 12 + (Math.random() * 5) // è®“åœˆåœˆå¤§å°ç¨å¾®å‹•æ…‹
            }).addTo(map);

            // è¨­è¨ˆå½ˆå‡ºè¦–çª— HTML
            const popupContent = `
                <div class="card-header">${point.name}</div>
                <div class="card-body">
                    <div class="price-row">
                        <span class="price-label-text">110å¹´(å®šæ¡ˆå‰)</span>
                        <span class="price-value old">${point.priceOld} è¬</span>
                    </div>
                    <div class="price-row">
                        <span class="price-label-text">111å¹´(å®šæ¡ˆå¾Œ)</span>
                        <span class="price-value new">${point.priceNew} è¬</span>
                    </div>
                    <div class="growth-tag">ğŸ”¥ ${point.growth}</div>
                    <p style="font-size:0.9em; color:#555; margin-top:10px; line-height:1.4;">
                        ${point.desc}
                    </p>
                </div>
            `;

            // ç¶å®šå½ˆå‡ºè¦–çª—
            marker.bindPopup(popupContent, {
                className: 'custom-popup',
                closeButton: false
            });
            
            // åŠ å…¥ hover æ•ˆæœ
            marker.on('mouseover', function (e) {
                this.openPopup();
            });
            // (é¸ç”¨) mouseout é—œé–‰ï¼Œå¦‚æœä½ å¸Œæœ›ç§»é–‹å°±é—œæ‰ï¼Œå¯ä»¥æŠŠä¸‹é¢è¨»è§£æ‰“é–‹
            // marker.on('mouseout', function (e) {
            //    this.closePopup();
            // });
        });

    </script>
</body>
</html>